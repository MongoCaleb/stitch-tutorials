{"ast":null,"code":"import _classCallCheck from \"/Users/caleb/git/mongocaleb/stitch-tutorials/tw_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/caleb/git/mongocaleb/stitch-tutorials/tw_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/caleb/git/mongocaleb/stitch-tutorials/tw_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/Users/caleb/git/mongocaleb/stitch-tutorials/tw_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/caleb/git/mongocaleb/stitch-tutorials/tw_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/caleb/git/mongocaleb/stitch-tutorials/tw_new/src/components/TodoList.js\";\nimport React from \"react\";\nimport TodoItem from \"./TodoItem\";\nimport { app, items } from \"./../stitch\";\n\nvar TodoList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TodoList, _React$Component);\n\n  _createClass(TodoList, [{\n    key: \"loadList\",\n    value: function loadList() {\n      console.log(app.auth.user);\n      var obj = this;\n      items.find({}, {\n        limit: 1000\n      }).asArray().then(function (docs) {\n        obj.setState({\n          items: docs,\n          requestPending: false\n        });\n      });\n    }\n  }]);\n\n  function TodoList(props) {\n    var _this;\n\n    _classCallCheck(this, TodoList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TodoList).call(this, props));\n    _this.state = {\n      items: []\n    };\n    return _this;\n  }\n\n  _createClass(TodoList, [{\n    key: \"checkHandler\",\n    value: function checkHandler(id, status) {\n      var _this2 = this;\n\n      items.updateOne({\n        _id: id\n      }, {\n        $set: {\n          checked: status\n        }\n      }).then(function () {\n        _this2.loadList();\n      }, {\n        rule: \"checked\"\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadList();\n    }\n  }, {\n    key: \"addItem\",\n    value: function addItem(event) {\n      var _this3 = this;\n\n      if (event.keyCode != 13) {\n        return;\n      }\n\n      this.setState({\n        requestPending: true\n      });\n      items.insertOne({\n        text: event.target.value,\n        owner_id: app.auth.user.id\n      }).then(function () {\n        _this3._newitem.value = \"\";\n\n        _this3.loadList();\n      });\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this4 = this;\n\n      this.setState({\n        requestPending: true\n      });\n      items.deleteMany({\n        checked: true\n      }).then(function () {\n        _this4.loadList();\n      });\n    }\n  }, {\n    key: \"setPending\",\n    value: function setPending() {\n      this.setState({\n        requestPending: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var foo = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"controls\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"new-item\",\n        placeholder: \"add a new item and hit <enter>\",\n        ref: function ref(n) {\n          _this5._newitem = n;\n        },\n        onKeyDown: function onKeyDown(e) {\n          return _this5.addItem(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), this.state.items.filter(function (x) {\n        return x.checked;\n      }).length > 0 ? React.createElement(\"div\", {\n        href: \"\",\n        className: \"cleanup-button\",\n        onClick: function onClick() {\n          return _this5.clear();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"delete selected item(s)\") : null), React.createElement(\"ul\", {\n        className: \"items-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, this.state.items.length == 0 ? React.createElement(\"div\", {\n        className: \"list-empty-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"empty list.\") : this.state.items.map(function (item) {\n        return React.createElement(TodoItem, {\n          key: item._id.toString(),\n          item: item,\n          items: _this5.items,\n          onChange: function onChange() {\n            return _this5.loadList();\n          },\n          onStartChange: function onStartChange() {\n            return _this5.setPending();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        });\n      })));\n      return foo;\n    }\n  }]);\n\n  return TodoList;\n}(React.Component);\n\nTodoList.displayName = \"TodoList\";\nexport default TodoList;","map":{"version":3,"sources":["/Users/caleb/git/mongocaleb/stitch-tutorials/tw_new/src/components/TodoList.js"],"names":["React","TodoItem","app","items","TodoList","console","log","auth","user","obj","find","limit","asArray","then","docs","setState","requestPending","props","state","id","status","updateOne","_id","$set","checked","loadList","rule","event","keyCode","insertOne","text","target","value","owner_id","_newitem","deleteMany","foo","n","e","addItem","filter","x","length","clear","map","item","toString","setPending","Component","displayName"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport TodoItem from \"./TodoItem\";\nimport {app, items} from \"./../stitch\";\n\nvar TodoList = class extends React.Component {\n\n   loadList() {\n      console.log(app.auth.user);\n      let obj = this;\n      items.find({}, {limit: 1000}).asArray().then(docs => {\n         obj.setState({ items: docs, requestPending: false });\n      });\n   }\n\nconstructor(props) {\n   super(props);\n\n   this.state = {\n      items: []\n   };\n}\n\n\ncheckHandler(id, status) {\n   items.updateOne({ _id: id }, { $set: { checked: status } }).then(() => {\n      this.loadList();\n   }, { rule: \"checked\" });\n}\n\ncomponentDidMount() {\n   this.loadList();\n}\n\naddItem(event) {\n   if (event.keyCode != 13) {\n      return;\n   }\n   this.setState({ requestPending: true });\n   items.insertOne({ text: event.target.value, owner_id: app.auth.user.id })\n      .then(() => {\n      this._newitem.value = \"\";\n      this.loadList();\n      });\n}\n\nclear() {\n   this.setState({ requestPending: true });\n   items.deleteMany({ checked: true }).then(() => {\n      this.loadList();\n   });\n}\n\nsetPending() {\n   this.setState({ requestPending: true });\n}\n\nrender() {\n   let foo = (\n      <div>\n      <div className=\"controls\">\n         <input\n            type=\"text\"\n            className=\"new-item\"\n            placeholder=\"add a new item and hit <enter>\"\n            ref={n => {\n            this._newitem = n;\n            }}\n            onKeyDown={e => this.addItem(e)}\n         />\n         {this.state.items.filter(x => x.checked).length > 0\n            ? <div\n               href=\"\"\n               className=\"cleanup-button\"\n               onClick={() => this.clear()}\n            >\n               delete selected item(s)\n            </div>\n            : null}\n      </div>\n      <ul className=\"items-list\">\n         {this.state.items.length == 0\n            ? <div className=\"list-empty-label\">empty list.</div>\n            : this.state.items.map(item => {\n               return (\n                  <TodoItem\n                  key={item._id.toString()}\n                  item={item}\n                  items={this.items}\n                  onChange={() => this.loadList()}\n                  onStartChange={() => this.setPending()}\n                  />\n               );\n            })}\n      </ul>\n      </div>\n   );\n   return foo;\n}\n};\n\nTodoList.displayName = \"TodoList\";\nexport default TodoList;"]},"metadata":{},"sourceType":"module"}